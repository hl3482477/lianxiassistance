<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" type="text/css" href="css/gm.css">
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/gm.js"></script>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <script src="layui/layui.js"  media="all"></script>
    <link rel="stylesheet" href="layui/css/layui.css">
    <link rel="stylesheet" href="layui/css/layui.mobile.css">
    <title>信息回收</title>
    <style>

        html, body{
            width: 100%;
            height: 100%;
            overflow-x:hidden;
            margin: 0px;
            padding: 0px;
        }

    </style>
</head>

<body>
<form action="#" method="get" name="form1" id="form1" style="display: none;">
    <!--获取浏览器的宽高，不能注释-->
    浏览器窗口 的 实际高度: <input type="text" name="availHeight" size="4"><br>
    浏览器窗口 的 实际宽度: <input type="text" name="availWidth" size="4"><br>
</form>
<div class="dialog-demo">
    <form class="form-inline" role="form">
        <div class="row">
            <div class="col-sm-4">



                            <label class="layui-form-label" style="width: 100px">日期范围</label>
                            <div class="layui-input-inline">
                                <input type="text" class="layui-input" id="test6" placeholder=" - ">
                            </div>


            </div>
            <script>
                layui.use('laydate', function(){
                    var laydate = layui.laydate;

                    //常规用法
                    laydate.render({
                        elem: '#test1'
                    });

                    //国际版
                    laydate.render({
                        elem: '#test1-1'
                        ,lang: 'en'
                    });

                    //年选择器
                    laydate.render({
                        elem: '#test2'
                        ,type: 'year'
                    });

                    //年月选择器
                    laydate.render({
                        elem: '#test3'
                        ,type: 'month'
                    });

                    //时间选择器
                    laydate.render({
                        elem: '#test4'
                        ,type: 'time'
                    });

                    //日期时间选择器
                    laydate.render({
                        elem: '#test5'
                        ,type: 'datetime'
                    });

                    //日期范围
                    laydate.render({
                        elem: '#test6'
                        ,range: true
                    });

                    //年范围
                    laydate.render({
                        elem: '#test7'
                        ,type: 'year'
                        ,range: true
                    });

                    //年月范围
                    laydate.render({
                        elem: '#test8'
                        ,type: 'month'
                        ,range: true
                    });

                    //时间范围
                    laydate.render({
                        elem: '#test9'
                        ,type: 'time'
                        ,range: true
                    });

                    //日期时间范围
                    laydate.render({
                        elem: '#test10'
                        ,type: 'datetime'
                        ,range: true
                    });

                    //自定义格式
                    laydate.render({
                        elem: '#test11'
                        ,format: 'yyyy年MM月dd日'
                    });
                    laydate.render({
                        elem: '#test12'
                        ,format: 'dd/MM/yyyy'
                    });
                    laydate.render({
                        elem: '#test13'
                        ,format: 'yyyyMMdd'
                    });
                    laydate.render({
                        elem: '#test14'
                        ,type: 'time'
                        ,format: 'H点m分'
                    });
                    laydate.render({
                        elem: '#test15'
                        ,type: 'month'
                        ,range: '~'
                        ,format: 'yyyy-MM'
                    });
                    laydate.render({
                        elem: '#test16'
                        ,type: 'datetime'
                        ,range: '到'
                        ,format: 'yyyy年M月d日H时m分s秒'
                    });

                    //开启公历节日
                    laydate.render({
                        elem: '#test17'
                        ,calendar: true
                    });

                    //自定义重要日
                    laydate.render({
                        elem: '#test18'
                        ,mark: {
                            '0-10-14': '生日'
                            ,'0-12-31': '跨年' //每年的日期
                            ,'0-0-10': '工资' //每月某天
                            ,'0-0-15': '月中'
                            ,'2017-8-15': '' //如果为空字符，则默认显示数字+徽章
                            ,'2099-10-14': '呵呵'
                        }
                        ,done: function(value, date){
                            if(date.year === 2017 && date.month === 8 && date.date === 15){ //点击2017年8月15日，弹出提示语
                                layer.msg('这一天是：中国人民抗日战争胜利72周年');
                            }
                        }
                    });

                    //限定可选日期
                    var ins22 = laydate.render({
                        elem: '#test-limit1'
                        ,min: '2016-10-14'
                        ,max: '2080-10-14'
                        ,ready: function(){
                            ins22.hint('日期可选值设定在 <br> 2016-10-14 到 2080-10-14');
                        }
                    });

                    //前后若干天可选，这里以7天为例
                    laydate.render({
                        elem: '#test-limit2'
                        ,min: -7
                        ,max: 7
                    });

                    //限定可选时间
                    laydate.render({
                        elem: '#test-limit3'
                        ,type: 'time'
                        ,min: '09:30:00'
                        ,max: '17:30:00'
                        ,btns: ['clear', 'confirm']
                    });

                    //同时绑定多个
                    lay('.test-item').each(function(){
                        laydate.render({
                            elem: this
                            ,trigger: 'click'
                        });
                    });

                    //初始赋值
                    laydate.render({
                        elem: '#test19'
                        ,value: '1989-10-14'
                        ,isInitValue: true
                    });

                    //选中后的回调
                    laydate.render({
                        elem: '#test20'
                        ,done: function(value, date){
                            layer.alert('你选择的日期是：' + value + '<br>获得的对象是' + JSON.stringify(date));
                        }
                    });

                    //日期切换的回调
                    laydate.render({
                        elem: '#test21'
                        ,change: function(value, date){
                            layer.msg('你选择的日期是：' + value + '<br><br>获得的对象是' + JSON.stringify(date));
                        }
                    });
                    //不出现底部栏
                    laydate.render({
                        elem: '#test22'
                        ,showBottom: false
                    });

                    //只出现确定按钮
                    laydate.render({
                        elem: '#test23'
                        ,btns: ['confirm']
                    });

                    //自定义事件
                    laydate.render({
                        elem: '#test24'
                        ,trigger: 'mousedown'
                    });

                    //点我触发
                    laydate.render({
                        elem: '#test25'
                        ,eventElem: '#test25-1'
                        ,trigger: 'click'
                    });

                    //双击我触发
                    lay('#test26-1').on('dblclick', function(){
                        laydate.render({
                            elem: '#test26'
                            ,show: true
                            ,closeStop: '#test26-1'
                        });
                    });

                    //日期只读
                    laydate.render({
                        elem: '#test27'
                        ,trigger: 'click'
                    });

                    //非input元素
                    laydate.render({
                        elem: '#test28'
                    });

                    //墨绿主题
                    laydate.render({
                        elem: '#test29'
                        ,theme: 'molv'
                    });

                    //自定义颜色
                    laydate.render({
                        elem: '#test30'
                        ,theme: '#393D49'
                    });

                    //格子主题
                    laydate.render({
                        elem: '#test31'
                        ,theme: 'grid'
                    });


                    //直接嵌套显示
                    laydate.render({
                        elem: '#test-n1'
                        ,position: 'static'
                    });
                    laydate.render({
                        elem: '#test-n2'
                        ,position: 'static'
                        ,lang: 'en'
                    });
                    laydate.render({
                        elem: '#test-n3'
                        ,type: 'month'
                        ,position: 'static'
                    });
                    laydate.render({
                        elem: '#test-n4'
                        ,type: 'time'
                        ,position: 'static'
                    });
                });
            </script>
            <div class="col-sm-3 col-md-offset-5" style="">
                <!--     <div class="form-group">
                         <label class="sr-only" for="name">姓名：</label>
                         <input type="text" class="form-control"  name="username" id="name" placeholder="请输入姓名">
                     </div>-->
                <div class="input-group">
                    <input type="text" class="form-control"  name="username" id="name" placeholder="请输入姓名">
                    <span class="input-group-addon submit"  id="submit" style="cursor: pointer">查询</span>
                </div>
            </div>
        </div>
    </form>
    <div class="row">
        <div class="col-sm-6">
            <h4 style="margin-top: 20px;">系统回收站信息列表</h4>
        </div>
        <div class="col-sm-6 site-demo-button" id="layerDemo" style="text-align: right">
            <button class="btn btn-primary" data-method="confirmTrans" style="margin-top: 20px;">清空回收站</button>
        </div>
    </div>


    <table grid-manager="demoOne">

    </table>
</div>
<script type="text/javascript" >
    $('table').GM({
        supportRemind: true
        ,gridManagerName: 'test'
//			,disableCache:true
        ,height: '370px'
        ,supportAjaxPage:true
        ,supportSorting: true
        ,ajax_data: 'http://www.lovejavascript.com/learnLinkManager/getLearnLinkList'
        /*  ,ajax_data:'package.json'*/
        ,ajax_type: 'POST'
        ,query: {pluginId: 1}
        ,pageSize:20
        ,columnData: [{
            key: 'name',
            /*remind: 'the name',*/
            width: '100px',
            text: '回收记录名称',
            sorting: 'DESC'
        },
            {
                key: 'formname',
                /*remind: 'the name',*/
                width: '100px',
                text: '回收记录所在表名',
                sorting: 'DESC'
            },
            {
                key: 'beizhu',
                /*remind: 'the name',*/
                width: '100px',
                text: '备注',
                sorting: 'DESC'
            },
            {
                key: 'info',
                /* remind: 'the info',*/
                text: '回收记录标识',
                sorting: ''
            },
            {
                key: 'hsjlz',
                /*remind: 'the name',*/
                width: '100px',
                text: '回收记录值',
                sorting: 'DESC'
            },
            {
                key: 'createDate',
                /*remind: 'the createDate',*/
                text: '创建时间',
                template: function(createDate, rowObject){
                    return new Date(createDate).format('YYYY-MM-DD HH:mm:ss');
                }
            },
            {
                key: 'createPeople',
                /*remind: 'the createDate',*/
                text: '创建人',
                template: function(createDate, rowObject){
                    return new Date(createDate).format('YYYY-MM-DD HH:mm:ss');
                }
            },

            {
                key: 'action',
                /*   remind: 'the action',*/
                text: '操作',
                template: function(action, rowObject){
                    return '<span onclick="valueText()" style="cursor: pointer" class="layui-btn layui-btn-info layui-btn-xs plugin-action edit-action" learnLink-id="'+rowObject.id+'">修改</span>'
                        +'<span onclick="deleteValue()" style="cursor: pointer;" class="layui-btn layui-btn-danger layui-btn-xs plugin-action del-action" learnLink-id="'+rowObject.id+'">删除</span>';
                }
            }
        ]
        // 分页前事件
        ,pagingBefore: function(query){
            console.log('pagingBefore', query);
        }
        // 分页后事件
        ,pagingAfter: function(data){
            console.log('pagingAfter', data);
        }
        // 排序前事件
        ,sortingBefore: function (data) {
            console.log('sortBefore', data);
        }
        // 排序后事件
        ,sortingAfter: function (data) {
            console.log('sortAfter', data);
        }
        // 宽度调整前事件
        ,adjustBefore: function (event) {
            console.log('adjustBefore', event);
        }
        // 宽度调整后事件
        ,adjustAfter: function (event) {
            console.log('adjustAfter', event);
        }
        // 拖拽前事件
        ,dragBefore: function (event) {
            console.log('dragBefore', event);
        }
        // 拖拽后事件
        ,dragAfter: function (event) {
            console.log('dragAfter', event);
        }
    });

    // 日期格式化,不是插件的代码,只用于处理时间格式化
    Date.prototype.format = function(fmt){
        var o = {
            "M+": this.getMonth() + 1, //月份
            "D+": this.getDate(), //日
            "d+": this.getDate(), //日
            "H+": this.getHours(), //小时
            "h+": this.getHours(), //小时
            "m+": this.getMinutes(), //分
            "s+": this.getSeconds(), //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds() //毫秒
        };
        if (/([Y,y]+)/.test(fmt)){
            fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        }
        for (var k in o){
            if(new RegExp("(" + k + ")").test(fmt)){
                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            }
        }
        return fmt;
    }
</script>
<script type="text/javascript">

    var winWidth = 0;
    var winHeight = 0;
    function findDimensions() //函数：获取尺寸
    {
        //获取窗口宽度
        if (window.innerWidth)
            winWidth = window.innerWidth;
        else if ((document.body) && (document.body.clientWidth))
            winWidth = document.body.clientWidth;
        //获取窗口高度
        if (window.innerHeight)
            winHeight = window.innerHeight;
        else if ((document.body) && (document.body.clientHeight))
            winHeight = document.body.clientHeight;
        //通过深入Document内部对body进行检测，获取窗口大小
        if (document.documentElement && document.documentElement.clientHeight && document.documentElement.clientWidth)
        {
            winHeight = document.documentElement.clientHeight;
            winWidth = document.documentElement.clientWidth;
        }
        //结果输出至两个文本框
        /*
         document.form1.availHeight.value= winHeight;
         */
        document.form1.availWidth.value= winWidth;
        $("input[name=availHeight]").val(winHeight);
        var frameheight=Number(winHeight-113-32);
        var table=Number(winHeight-88);
    }
    findDimensions();
    //调用函数，获取数值
    window.onresize=findDimensions;
</script>
<script>
    $(function () {
        $("body").on('click','.edit-action',function(){
            var thisval=$(this).parent().parent().text();
            alert(thisval)
        });
        $("body").on('click','.del-action',function(){
            $(this).parent().parent().remove();
        });

    })
</script>
<script>
    layui.use('layer', function(){ //独立版的layer无需执行这一句
        var $ = layui.jquery, layer = layui.layer; //独立版的layer无需执行这一句

        //触发事件
        var active = {
            setTop: function(){
                var that = this;
                //多窗口模式，层叠置顶
                layer.open({
                    type: 2 //此处以iframe举例
                    ,title: '模块信息录入'
                    ,area: ['700px', '480px']
                    ,shade: 0
                    ,maxmin: true
                    /*,offset: [ //为了演示，随机坐标
                     Math.random()*($(window).height()-300)
                     ,Math.random()*($(window).width()-390)
                     ]*/
                    ,offset:'10px'
                    ,content: '确定要清空所有内容吗'
                    ,btn: ['保存', '关闭'] //只是为了演示
                    /*    ,yes: function(){
                     $(that).click();
                     }*/
                    //yes之后是layui默认js，如果解除注释，点击保存会触发原来的js效果，也就是点击一次再弹窗一个
                    ,btn2: function(){
                        layer.closeAll();
                    }

                    ,zIndex: layer.zIndex //重点1
                    ,success: function(layero){
                        layer.setTop(layero); //重点2
                    }
                });
            }
            ,confirmTrans: function(){
                //配置一个透明的询问框
                layer.msg('确定要清空表格里的所有内容吗？<br>一旦清空无法复原！！！！！！', {
                    time: 20000, //20s后自动关闭
                    btn: ['确定清空', '我再考虑考虑', '算了吧']
                });
            }
        };

        $('#layerDemo .btn-primary').on('click', function(){
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });

    });
</script>
<script>
    $(document).ready(function () {
        $("body").on('click','.layui-layer-btn0',function(){
            alert("获取该按钮元素的js方法在Menu information.html最底部，以后提交表单写函数可参照这种js的写法")
        });
    })
</script>
</body>
</html>
